O2.createObject("psr.config.cards",{flutiste:{lbl:"Flutiste",tpl:"url",crd:"svg/flutiste.svg",rrt:"epique",lyr:0,lgt:1,hgt:1,wgt:1,hp:100,atq:0,asp:0,rng:5,aoe:0,spd:1},missile:{lbl:"Missile",tpl:"url",crd:"svg/missile.svg",rrt:"rare",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card1:{lbl:"Card1",tpl:"url",crd:"svg/missile.svg",rrt:"commune",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card2:{lbl:"Card2",tpl:"url",crd:"svg/missile.svg",rrt:"legendaire",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card3:{lbl:"Card3",tpl:"url",crd:"svg/missile.svg",rrt:"commune",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card4:{lbl:"Card4",tpl:"url",crd:"svg/missile.svg",rrt:"rare",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card5:{lbl:"Card5",tpl:"url",crd:"svg/missile.svg",rrt:"rare",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card6:{lbl:"Card6",tpl:"url",crd:"svg/missile.svg",rrt:"epique",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card7:{lbl:"Card7",tpl:"url",crd:"svg/missile.svg",rrt:"commune",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card8:{lbl:"Card8",tpl:"url",crd:"svg/missile.svg",rrt:"commune",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1},card9:{lbl:"Card9",tpl:"url",crd:"svg/missile.svg",rrt:"commune",lyr:0,lgt:1,hgt:1,wgt:1,hp:400,atq:25,asp:1.2,rng:5,aoe:0,spd:1}}),function(a,b){a(function(){var b=a(".view","#main");new psr.view.Shop,new psr.view.Cards,new psr.view.Battle,new psr.view.Chat,b.perfectScrollbar(),a(".init-tabs").addClass("tabs tabs-fixed-width").tabs({onShow:function(){b.perfectScrollbar("update")}}),a(".init-tabs").tabs("select_tab","cards")})}(jQuery,O2),function(a,b){var c=a(".view","#main"),d=a(".init-tabs","#main");b.createClass("psr.view.Abstract",{$tab:null,$view:null,$title:null,$content:null,tabName:"",title:"",icon:"",tabTooltip:"",__construct:function(){this.$view=a('<div class="col m12">').appendTo(a('<div id="'+this.tabName+'" class="row">').appendTo(c)),this.$title=a('<div class="card black white-text"><div class="card-title"><h3>'+this.title+"</h3></div></div>").appendTo(this.$view),this.$content=a('<div class="content">').appendTo(this.$view),this.$tab=a('<li class="tab col s3 tooltipped" data-position="top" data-tooltip="'+this.tabTooltip+'"><a href="#'+this.tabName+'"><i class="material-icons" >'+this.icon+"</i></a></li>").appendTo(d),this.$tab.tooltip()}})}(jQuery,O2),function(a,b){b.extendClass("psr.view.Battle","psr.view.Abstract",{__construct:function(){this.tabName="battle",this.title="Au combat !",this.icon="&#xE8D3;",this.tabTooltip="Fight !",__inherited()}})}(jQuery,O2),function(a,b){b.extendClass("psr.view.Cards","psr.view.Abstract",{decks:null,$decks:null,current:null,$tabWrapper:null,__construct:function(){this.tabName="cards",this.title="Vos cartes",this.icon="&#xE8F0;",this.tabTooltip="Vos cartes",__inherited(),this.$tabWrapper=a('<ul class="tabs tabs-fixed-width black">').appendTo(this.$content),this.loadDecks(),this.listing()},loadDecks:function(){that=this,this.decks=[],this.$decks=[];var b=window.localStorage.getItem("decks");if(b){b=JSON.parse(b);for(var c in b){var d=new psr.view.cards.Deck(b[c]);this.$decks.push(d),d.$tab.appendTo(this.$tabWrapper),d.$tabContent.appendTo(this.$content)}}else{var d=new psr.view.cards.Deck;this.$decks.push(d),this.current=d,d.$tab.appendTo(this.$tabWrapper),d.$tabContent.appendTo(this.$content)}this.$tabWrapper.tabs({onShow:function(){this.current=that.decks[a(this).data("deckid")-1]}});var e=window.localStorage.getItem("curDeck");return e&&this.$decks[e]&&this.$tabWrapper.tabs("select_tab",this.$decks[e].$tab.attr("id")),this},listing:function(){a("<h3>Cartes disponibles</h3>").appendTo(this.$content);for(var b in psr.config.cards)this._createCard(b);return this},_createCard:function(b){var c=this,d=new psr.view.cards.Card(b);this.$content.append(a('<div class="col s3">').append(d.$card)),d.$card.on("dragstart",function(a){a.originalEvent.dataTransfer.setData("text",""),c.current.draggedCard=d})},_filter:function(){}})}(jQuery,O2),function(a,b){b.extendClass("psr.view.Chat","psr.view.Abstract",{__construct:function(){this.tabName="chat",this.icon="&#xE8CD;",this.tabTooltip="Chat",__inherited();var b=a('<div class="chat tab col s12"></div>'),c=a('<div class="chat-txt"></div>'),d=a('<div class="chat-bulle"><b>Neo dit:</b> Bonjour</div>'),e=a('<div class="chat-input"><input type="text"/></div>');b.html(c.html(d).append(e)).appendTo(this.$content)}})}(jQuery,O2),function(a,b){b.extendClass("psr.view.Shop","psr.view.Abstract",{__construct:function(){this.tabName="shop",this.title="Pas de pay to win ici !",this.icon="&#xE8CC;",this.tabTooltip="Pas de pay to win ici !",__inherited()}})}(jQuery,O2),function(a,b){b.createClass("psr.view.cards.Card",{$card:null,_defaultCard:{rrt:"?",lbl:"???",crd:"img/nope.png"},cardInfo:null,__construct:function(a){this.cardInfo=psr.config.cards[a]||_defaultCard,this.cardInfo.cardName=a||null,this.initCard()},initCard:function(){return this.$card=a('<div class="psrCard '+this.cardInfo.rrt+'" draggable="true" data-tooltip="'+this.cardInfo.lbl+'"><img draggable="false" src="'+this.cardInfo.crd+'" width="100%"></div>'),a("[data-tooltip]",this.$card).tooltip(),this}})}(jQuery,O2),function(a,b){var c=[];b.createClass("psr.view.cards.Deck",{_deck:null,$tab:null,$tabContent:null,draggedCard:null,__construct:function(a){this._deck=[],c.push(this),this.deckId=c.length,a&&this.setDeck(a),this.makeTab(),this.makeTabContent()},setDeck:function(a){for(var b in a)this._deck.push(new psr.view.cards.Card(a[b]));return this},makeTab:function(){return this.$tab=a('<li class="tab col s3"><a href="#deck'+this.deckid+'" data-deckId="'+this.deckId+'">'+this.deckId+"</a></li>"),this},makeTabContent:function(){var b=this;this.$tabContent=a('<div id="deck'+this.deckId+'" class="row psrDeck">');for(var c=0;c<8;c++){var d=a('<div class="dropZone" data-placement="'+c+'"></div>');a('<div class="col s3"></div>').append(d).appendTo(this.$tabContent),d.on("dragover",function(b){var c=a(this);b.preventDefault(),c.css("opacity","0.5")}).on("dragexit dragleave drop dragend",function(){var b=a(this);b.css("opacity","")}).on("drop",function(c){var d=a(this);c.originalEvent.preventDefault();var e=b.draggedCard.cardInfo.cardName;b._deck.indexOf(e)==-1?(d.html(b.draggedCard.$card.clone()),b._deck[d.data("placement")]=b.draggedCard.cardInfo.cardName):Materialize.toast("Cette carte est déjà dans le deck...",3e3)})}return this}})}(jQuery,O2);